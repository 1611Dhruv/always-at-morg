server {
    listen 80;
    server_name web.always-at-morg.bid;

    # Root directory (this is your website/build folder after running npm run build)
    root /var/www/always-at-morg;
    index index.html;

    # Serve static release files directly
    location /releases/ {
        try_files $uri =404;
        add_header Content-Type application/octet-stream;
        add_header Content-Disposition 'attachment';
    }

    # Serve install scripts directly
    location ~ ^/(install\.sh|install\.ps1)$ {
        try_files $uri =404;
        add_header Content-Type text/plain;
    }

    # Serve test page directly
    location /test-releases.html {
        try_files $uri =404;
    }

    # All other requests go to React app (SPA routing)
    location / {
        try_files $uri $uri/ /index.html;
    }

    # Optional: Add gzip compression
    gzip on;
    gzip_types text/plain text/css application/json application/javascript text/xml application/xml application/xml+rss text/javascript;
}
